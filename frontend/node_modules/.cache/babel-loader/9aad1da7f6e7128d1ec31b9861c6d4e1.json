{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexr\\\\Desktop\\\\MANLY\\\\lottery\\\\frontend\\\\src\\\\App.js\";\nimport React from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\nimport contractInfo from './contractConfig';\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      manager: '',\n      players: [],\n      balance: '',\n      balanceEther: '',\n      value: '',\n      message: '',\n      isMetaMaskPluginAvailable: false,\n      isTransactionIsRunning: false,\n      startWarning: false,\n      errorMessage: ''\n    };\n\n    this.onSubmit = async event => {\n      event.preventDefault();\n      this.setState({\n        errorMessage: ''\n      });\n      const {\n        isMetaMaskPluginAvailable\n      } = this.state;\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x61'\n        }]\n      });\n\n      if (!isMetaMaskPluginAvailable) {\n        return this.metaMaskNotAvailable();\n      }\n\n      await window.ethereum.enable();\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        message: 'Transaction is processing. This might take 12 to 30 seconds.',\n        isTransactionIsRunning: true\n      });\n\n      try {\n        await lottery.methods.enter().send({\n          from: accounts[0],\n          value: web3.utils.toWei(this.state.value, 'ether')\n        });\n        this.updateContractInfo();\n        this.setState({\n          message: 'You entered to the lottery',\n          value: ''\n        });\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        isTransactionIsRunning: false\n      });\n    };\n\n    this.onConnect = async event => {\n      event.preventDefault();\n      this.setState({\n        errorMessage: ''\n      });\n      const {\n        isMetaMaskPluginAvailable\n      } = this.state;\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x61'\n        }]\n      });\n\n      if (!isMetaMaskPluginAvailable) {\n        return this.metaMaskNotAvailable();\n      }\n\n      await window.ethereum.enable();\n    };\n\n    this.onClickPickWinner = async event => {\n      event.preventDefault();\n      const {\n        isMetaMaskPluginAvailable\n      } = this.state;\n\n      if (!isMetaMaskPluginAvailable) {\n        return this.metaMaskNotAvailable();\n      }\n\n      await window.ethereum.enable();\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        message: 'Transaction is processing. This might take 9 to 15 seconds.',\n        isTransactionIsRunning: true\n      });\n\n      try {\n        await lottery.methods.pickWinner().send({\n          from: accounts[0]\n        });\n      } catch (ex) {}\n\n      this.setState({\n        message: 'Winner picked'\n      });\n      this.setState({\n        isTransactionIsRunning: false\n      });\n    };\n\n    this.metaMaskNotAvailable = () => {\n      this.setState({\n        startWarning: true\n      });\n    };\n\n    this.onClickUpdateAnnouncement = () => {\n      this.updateContractInfo();\n    };\n  }\n\n  async componentDidMount() {\n    const isMetaMaskPluginAvailable = web3 && lottery;\n    this.setState({\n      isMetaMaskPluginAvailable\n    });\n    this.updateContractInfo();\n  }\n\n  async updateContractInfo() {\n    fetch('/api/contract-info').then(res => res.json()).then(_ref => {\n      let {\n        manager,\n        players,\n        balanceWei: balance,\n        balanceEther\n      } = _ref;\n      this.setState({\n        manager,\n        players,\n        balance,\n        balanceEther\n      });\n    }).catch(console.log);\n  }\n\n  mainWindow() {\n    const {\n      isMetaMaskPluginAvailable,\n      startWarning,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-contact100 flex-col-c-m\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap-contact100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      className: \"contact100-form validate-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      name: \"myForm\",\n      action: \"/action_page.php\",\n      onsubmit: this.onConnect,\n      classname: \"container-connect100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-connect100-connect-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"connect100-connect-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }, \"CONNECT\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"contact100-form-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, \"BE A MAN, BE RICH.\"), !isMetaMaskPluginAvailable && !startWarning && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \"Metamask Not Found\"), !isMetaMaskPluginAvailable && startWarning && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, \"Metamask Not Found\"), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found error-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, errorMessage), this.inputForm(), this.announcements()), this.rules()));\n  }\n\n  rules() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contact100-more flex-col-c-m\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"txt1 p-b-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, \"MANLY JACKPOT\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-w size1 p-b-47\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"styledimg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-col size2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"txt2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"This lottery contract has a prize pool and a list of people who have entered the prize pool. People send some amount of money(bnb) in the contract. As soon as people send some amount of money, they are being recorded as a player. BNB, that the players send, directly goes to the contract account. After a certain times, contract manager make the contract to pick a winner. Then the contract pick a winner randomly and transfer all money from the prize pool to the winner. At that point, the lottery contract resets and becomes ready to accept a new list of players.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contract-info-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }, \"Contract Address: \", contractInfo.contractAddress), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, \"Developed By\", ' ', \"MICKEY GOLDMILL AND MANLY TEAM\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/images/logo1.png\",\n      alt: \"...\",\n      class: \"img-thumbnail\",\n      height: \"64\",\n      weight: \"64\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"txt4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 6\n      }\n    }, \"BE A MAN, BUY MANLY.\")))))));\n  }\n\n  announcements() {\n    const {\n      manager,\n      players,\n      balanceBNB\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }\n    }, \"Announcements\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, \"Minimum \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    }, \"0.026\"), \" BNB is required.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    }, \"The contract is managed by MANLY TEAM\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"manager-address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, manager), \".\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }, \"Total \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 19\n      }\n    }, players.length), ' ', \"players already joined here.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, \"You may win \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    }, balanceBNB), ' ', \"BNB.\")));\n  }\n\n  inputForm() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap-input100 validate-input \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"email\",\n      className: \"input100\",\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"Example: 0.50\",\n      value: this.state.value,\n      onChange: event => this.setState({\n        value: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"focus-input100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-contact100-form-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"contact100-form-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }\n    }, \"Join\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"network-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }\n    }, \"This app is running on BSC test network and dealing with fake BNB.\"));\n  }\n\n  render() {\n    const {\n      isTransactionIsRunning,\n      message\n    } = this.state;\n    return /*#__PURE__*/React.createElement(LoadingOverlay, {\n      active: isTransactionIsRunning,\n      spinner: true,\n      text: message,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 7\n      }\n    }, this.mainWindow());\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/alexr/Desktop/MANLY/lottery/frontend/src/App.js"],"names":["React","LoadingOverlay","web3","lottery","contractInfo","App","Component","state","manager","players","balance","balanceEther","value","message","isMetaMaskPluginAvailable","isTransactionIsRunning","startWarning","errorMessage","onSubmit","event","preventDefault","setState","window","ethereum","request","method","params","chainId","metaMaskNotAvailable","enable","accounts","eth","getAccounts","methods","enter","send","from","utils","toWei","updateContractInfo","err","onConnect","onClickPickWinner","pickWinner","ex","onClickUpdateAnnouncement","componentDidMount","fetch","then","res","json","balanceWei","catch","console","log","mainWindow","inputForm","announcements","rules","contractAddress","balanceBNB","length","target","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\nimport contractInfo from './contractConfig';\n\nclass App extends React.Component {\n  state = {\n    manager: '',\n    players: [],\n    balance: '',\n    balanceEther: '',\n    value: '',\n    message: '',\n    isMetaMaskPluginAvailable: false,\n    isTransactionIsRunning: false,\n    startWarning: false,\n    errorMessage: ''\n  };\n\n  async componentDidMount() {\n    const isMetaMaskPluginAvailable = web3 && lottery;\n    this.setState({ isMetaMaskPluginAvailable });\n    this.updateContractInfo();\n  }\n\n\n  async updateContractInfo() {\n    fetch('/api/contract-info')\n      .then(res => res.json())\n      .then(({ manager, players, balanceWei: balance, balanceEther }) => {\n        this.setState({ manager, players, balance, balanceEther });\n      })\n      .catch(console.log);\n  }\n\n  onSubmit = async event => {\n    event.preventDefault();\n    this.setState({\n      errorMessage: ''\n    });\n    const { isMetaMaskPluginAvailable } = this.state;\n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: '0x61' }],\n    });\n\n    if (!isMetaMaskPluginAvailable) {\n      return this.metaMaskNotAvailable();\n    }\n\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      message: 'Transaction is processing. This might take 12 to 30 seconds.',\n      isTransactionIsRunning: true\n    });\n    try {\n      await lottery.methods.enter().send({\n        from: accounts[0],\n        value: web3.utils.toWei(this.state.value, 'ether')\n      });\n      this.updateContractInfo();\n      this.setState({\n        message: 'You entered to the lottery',\n        value: ''\n      });\n    } catch (err) {\n      this.setState({\n        errorMessage: err.message\n      });\n    }\n    this.setState({ isTransactionIsRunning: false });\n  };\n\n\n  onConnect = async event => {\n    event.preventDefault();\n    this.setState({\n      errorMessage: ''\n    });\n    const { isMetaMaskPluginAvailable } = this.state;\n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: '0x61' }],\n    });\n\n    if (!isMetaMaskPluginAvailable) {\n      return this.metaMaskNotAvailable();\n    }\n\n    await window.ethereum.enable();\n  };\n\n  onClickPickWinner = async event => {\n    event.preventDefault();\n    const { isMetaMaskPluginAvailable } = this.state;\n    if (!isMetaMaskPluginAvailable) {\n      return this.metaMaskNotAvailable();\n    }\n\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      message: 'Transaction is processing. This might take 9 to 15 seconds.',\n      isTransactionIsRunning: true\n    });\n\n    try {\n      await lottery.methods.pickWinner().send({\n        from: accounts[0]\n      });\n    } catch (ex) {}\n\n    this.setState({\n      message: 'Winner picked'\n    });\n\n    this.setState({ isTransactionIsRunning: false });\n  };\n\n  metaMaskNotAvailable = () => {\n    this.setState({\n      startWarning: true\n    });\n  };\n\n  onClickUpdateAnnouncement = () => {\n    this.updateContractInfo();\n  };\n\n  mainWindow() {\n    const {\n      isMetaMaskPluginAvailable,\n      startWarning,\n      errorMessage\n    } = this.state;\n    return (\n      <div className='container-contact100 flex-col-c-m'>\n        <div className='wrap-contact100'>\n          <form\n            onSubmit={this.onSubmit}\n            className='contact100-form validate-form'\n          >\n          <form name=\"myForm\" action=\"/action_page.php\" onsubmit={this.onConnect} classname=\"container-connect100\"></form>\n            <div className='container-connect100-connect-btn'>\n          <button className='connect100-connect-btn'>CONNECT</button>\n        </div>\n            <span className='contact100-form-title'>BE A MAN, BE RICH.</span>\n            {!isMetaMaskPluginAvailable && !startWarning && (\n              <div className='metamask-not-found'>Metamask Not Found</div>\n            )}\n            {!isMetaMaskPluginAvailable && startWarning && (\n              <div className='metamask-not-found warning'>\n                Metamask Not Found\n              </div>\n            )}\n            {errorMessage && (\n              <div className='metamask-not-found error-message'>\n                {errorMessage}\n              </div>\n            )}\n            {this.inputForm()}\n            {this.announcements()}\n          </form>\n          {this.rules()}\n        </div>\n      </div>\n    );\n  }\n\n  rules() {\n    return (\n      <div className='contact100-more flex-col-c-m'>\n        <span className='txt1 p-b-20'>MANLY JACKPOT</span>\n          <div className='flex-w size1 p-b-47'>\n            <div id=\"styledimg\"></div>\n              <div className='flex-col size2'>\n                <span className='txt2'>\n                  This lottery contract has a prize pool and a list of people who\n                  have entered the prize pool. People send some amount of\n                  money(bnb) in the contract. As soon as people send some amount\n                  of money, they are being recorded as a player. BNB, that the\n                  players send, directly goes to the contract account. After a\n                  certain times, contract manager make the contract to pick a\n                  winner. Then the contract pick a winner randomly and transfer all\n                  money from the prize pool to the winner. At that point, the\n                  lottery contract resets and becomes ready to accept a new list of\n                  players.\n                </span>\n\n            <div className='contract-info-container'>\n              <div>Contract Address: {contractInfo.contractAddress}</div>\n              <div>\n                Developed By{' '}\n                  MICKEY GOLDMILL AND MANLY TEAM\n              </div>\n\t\t\t  <div>\n\t\t\t  \t<center><img src=\"/images/logo1.png\" alt=\"...\" class=\"img-thumbnail\" height=\"64\" weight=\"64\"></img></center>\n\t\t\t  \t<span className='txt4'>\n\t\t\t\t\t<center>\t\t\t  \t\n\t\t\t\t\t\tBE A MAN, BUY MANLY.\n\t\t\t  \t\t</center>\n\t\t\t  \t</span>\n\t\t\t  </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  announcements() {\n    const { manager, players, balanceBNB } = this.state;\n    return (\n      <div className='announcement-container'>\n        <div className='announcement-title'>\n          Announcements\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            Minimum <span className='marked-number'>0.026</span> BNB is\n            required.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            The contract is managed by MANLY TEAM\n            <span className='manager-address'>{manager}</span>.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            Total <span className='marked-number'>{players.length}</span>{' '}\n            players already joined here.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            You may win <span className='marked-number'>{balanceBNB}</span>{' '}\n            BNB.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  inputForm() {\n    return (\n      <div>\n        <div className='wrap-input100 validate-input '>\n          <input\n            id='email'\n            className='input100'\n            type='text'\n            name='email'\n            placeholder='Example: 0.50'\n            value={this.state.value}\n            onChange={event => this.setState({ value: event.target.value })}\n          />\n          <span className='focus-input100'></span>\n        </div>\n        <div className='container-contact100-form-btn'>\n          <button className='contact100-form-btn'>Join</button>\n        </div>\n        <span className='network-warning'>\n          This app is running on BSC test network and dealing with fake\n          BNB.\n        </span>\n      </div>\n    );\n  }\n\n  render() {\n    const { isTransactionIsRunning, message } = this.state;\n    return (\n      <LoadingOverlay active={isTransactionIsRunning} spinner text={message}>\n        {this.mainWindow()}\n      </LoadingOverlay>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}