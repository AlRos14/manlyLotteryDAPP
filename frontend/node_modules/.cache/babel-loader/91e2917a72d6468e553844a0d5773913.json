{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexr\\\\Desktop\\\\MANLY\\\\lottery\\\\frontend\\\\src\\\\App.js\";\nimport React from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\nimport contractInfo from './contractConfig';\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      manager: '',\n      players: [],\n      balance: '',\n      balanceEther: '',\n      value: '',\n      message: '',\n      isMetaMaskPluginAvailable: false,\n      isTransactionIsRunning: false,\n      startWarning: false,\n      errorMessage: ''\n    };\n\n    this.onSubmit = async event => {\n      event.preventDefault();\n      this.setState({\n        errorMessage: ''\n      });\n      const {\n        isMetaMaskPluginAvailable\n      } = this.state; //anadido \n\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x61'\n        }] // chainId must be in hexadecimal numbers\n\n      }); //\n\n      if (!isMetaMaskPluginAvailable) {\n        return this.metaMaskNotAvailable();\n      }\n\n      await window.ethereum.enable();\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        message: 'Transaction is processing. This might take 12 to 30 seconds.',\n        isTransactionIsRunning: true\n      });\n\n      try {\n        await lottery.methods.enter().send({\n          from: accounts[0],\n          value: web3.utils.toWei(this.state.value, 'ether')\n        });\n        this.updateContractInfo();\n        this.setState({\n          message: 'You entered to the lottery',\n          value: ''\n        });\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        isTransactionIsRunning: false\n      });\n    };\n\n    this.onClickPickWinner = async event => {\n      event.preventDefault();\n      const {\n        isMetaMaskPluginAvailable\n      } = this.state;\n\n      if (!isMetaMaskPluginAvailable) {\n        return this.metaMaskNotAvailable();\n      }\n\n      await window.ethereum.enable();\n      const accounts = await web3.eth.getAccounts();\n      this.setState({\n        message: 'Transaction is processing. This might take 9 to 15 seconds.',\n        isTransactionIsRunning: true\n      });\n\n      try {\n        await lottery.methods.pickWinner().send({\n          from: accounts[0]\n        });\n      } catch (ex) {}\n\n      this.setState({\n        message: 'Winner picked'\n      });\n      this.setState({\n        isTransactionIsRunning: false\n      });\n    };\n\n    this.metaMaskNotAvailable = () => {\n      this.setState({\n        startWarning: true\n      });\n    };\n\n    this.onClickUpdateAnnouncement = () => {\n      this.updateContractInfo();\n    };\n  }\n\n  async componentDidMount() {\n    const isMetaMaskPluginAvailable = web3 && lottery;\n    this.setState({\n      isMetaMaskPluginAvailable\n    });\n    this.updateContractInfo();\n  }\n\n  async updateContractInfo() {\n    fetch('/api/contract-info').then(res => res.json()).then(_ref => {\n      let {\n        manager,\n        players,\n        balanceWei: balance,\n        balanceEther\n      } = _ref;\n      this.setState({\n        manager,\n        players,\n        balance,\n        balanceEther\n      });\n    }).catch(console.log);\n  }\n\n  mainWindow() {\n    const {\n      isMetaMaskPluginAvailable,\n      startWarning,\n      errorMessage\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-contact100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap-contact100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      className: \"contact100-form validate-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"contact100-form-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, \"Try Your Luck\"), !isMetaMaskPluginAvailable && !startWarning && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, \"Metamask Not Found\"), !isMetaMaskPluginAvailable && startWarning && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"Metamask Not Found\"), errorMessage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"metamask-not-found error-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, errorMessage), this.inputForm(), this.announcements()), this.rules()));\n  }\n\n  rules() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contact100-more flex-col-c-m\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      class: \"navbar navbar-light bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"navbar-brand\",\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/docs/1.png\",\n      class: \"rounded mx-auto d-block\",\n      alt: \"...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }\n    }))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"txt1 p-b-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, \"MANLY JACKPOT\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-w size1 p-b-47\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"styledimg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-col size2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"txt2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, \"This lottery contract has a prize pool and a list of people who have entered the prize pool. People send some amount of money(bnb) in the contract. As soon as people send some amount of money, they are being recorded as a player. BNB, that the players send, directly goes to the contract account. After a certain times, contract manager make the contract to pick a winner. Then the contract pick a winner randomly and transfer all money from the prize pool to the winner. At that point, the lottery contract resets and becomes ready to accept a new list of players.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contract-info-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, \"Contract Address: \", contractInfo.contractAddress), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, \"Monitor Contract Transaction in\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"remote-link\",\n      href: \"https://rinkeby.etherscan.io/tx/0x3349da25727612e32d292b2fd1f1d2ac5d07b35b9b0f62f356f60d3aa65c6241\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, \"EtherScan\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }, \"Source Code:\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"remote-link\",\n      href: \"https://github.com/bmshamsnahid/Decentralized-Lottery-App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, \"Github\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, \"Inspired from\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"remote-link\",\n      href: \"https://www.udemy.com/course/ethereum-and-solidity-the-complete-developers-guide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, \"Stephen Grider Course\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, \"Powered By\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"remote-link\",\n      href: \"https://www.ethereum.org/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, \"Ethereum Network\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }, \"Developed By\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"remote-link\",\n      href: \"https://shams-nahid.herokuapp.com/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, \"Shams Nahid\"))))));\n  }\n\n  announcements() {\n    const {\n      manager,\n      players,\n      balanceBNB\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }, \"Announcements\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }, \"Minimum \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }, \"0.026\"), \" BNB is required.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }\n    }, \"The contract is managed by MANLY TEAM\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"manager-address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }\n    }, manager), \".\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }\n    }, \"Total \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 19\n      }\n    }, players.length), ' ', \"players already joined here.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"announcement-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"announcement-status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    }, \"You may win \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"marked-number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 25\n      }\n    }, balanceBNB), ' ', \"BNB.\")));\n  }\n\n  inputForm() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrap-input100 validate-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"email\",\n      className: \"input100\",\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"Example: 0.50\",\n      value: this.state.value,\n      onChange: event => this.setState({\n        value: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"focus-input100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-contact100-form-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"contact100-form-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }\n    }, \"Join\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"network-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }\n    }, \"This app is running on BSC test network and dealing with fake BNB.\"));\n  }\n\n  render() {\n    const {\n      isTransactionIsRunning,\n      message\n    } = this.state;\n    return /*#__PURE__*/React.createElement(LoadingOverlay, {\n      active: isTransactionIsRunning,\n      spinner: true,\n      text: message,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 7\n      }\n    }, this.mainWindow());\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/alexr/Desktop/MANLY/lottery/frontend/src/App.js"],"names":["React","LoadingOverlay","web3","lottery","contractInfo","App","Component","state","manager","players","balance","balanceEther","value","message","isMetaMaskPluginAvailable","isTransactionIsRunning","startWarning","errorMessage","onSubmit","event","preventDefault","setState","window","ethereum","request","method","params","chainId","metaMaskNotAvailable","enable","accounts","eth","getAccounts","methods","enter","send","from","utils","toWei","updateContractInfo","err","onClickPickWinner","pickWinner","ex","onClickUpdateAnnouncement","componentDidMount","fetch","then","res","json","balanceWei","catch","console","log","mainWindow","inputForm","announcements","rules","contractAddress","balanceBNB","length","target","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\nimport contractInfo from './contractConfig';\n\nclass App extends React.Component {\n  state = {\n    manager: '',\n    players: [],\n    balance: '',\n    balanceEther: '',\n    value: '',\n    message: '',\n    isMetaMaskPluginAvailable: false,\n    isTransactionIsRunning: false,\n    startWarning: false,\n    errorMessage: ''\n  };\n\n  async componentDidMount() {\n    const isMetaMaskPluginAvailable = web3 && lottery;\n    this.setState({ isMetaMaskPluginAvailable });\n    this.updateContractInfo();\n  }\n\n\n  async updateContractInfo() {\n    fetch('/api/contract-info')\n      .then(res => res.json())\n      .then(({ manager, players, balanceWei: balance, balanceEther }) => {\n        this.setState({ manager, players, balance, balanceEther });\n      })\n      .catch(console.log);\n  }\n\n  onSubmit = async event => {\n    event.preventDefault();\n    this.setState({\n      errorMessage: ''\n    });\n    const { isMetaMaskPluginAvailable } = this.state;\n    //anadido \n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: '0x61' }], // chainId must be in hexadecimal numbers\n    });\n    //\n\n    if (!isMetaMaskPluginAvailable) {\n      return this.metaMaskNotAvailable();\n    }\n\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      message: 'Transaction is processing. This might take 12 to 30 seconds.',\n      isTransactionIsRunning: true\n    });\n    try {\n      await lottery.methods.enter().send({\n        from: accounts[0],\n        value: web3.utils.toWei(this.state.value, 'ether')\n      });\n      this.updateContractInfo();\n      this.setState({\n        message: 'You entered to the lottery',\n        value: ''\n      });\n    } catch (err) {\n      this.setState({\n        errorMessage: err.message\n      });\n    }\n    this.setState({ isTransactionIsRunning: false });\n  };\n\n  onClickPickWinner = async event => {\n    event.preventDefault();\n    const { isMetaMaskPluginAvailable } = this.state;\n    if (!isMetaMaskPluginAvailable) {\n      return this.metaMaskNotAvailable();\n    }\n\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      message: 'Transaction is processing. This might take 9 to 15 seconds.',\n      isTransactionIsRunning: true\n    });\n\n    try {\n      await lottery.methods.pickWinner().send({\n        from: accounts[0]\n      });\n    } catch (ex) {}\n\n    this.setState({\n      message: 'Winner picked'\n    });\n\n    this.setState({ isTransactionIsRunning: false });\n  };\n\n  metaMaskNotAvailable = () => {\n    this.setState({\n      startWarning: true\n    });\n  };\n\n  onClickUpdateAnnouncement = () => {\n    this.updateContractInfo();\n  };\n\n  mainWindow() {\n    const {\n      isMetaMaskPluginAvailable,\n      startWarning,\n      errorMessage\n    } = this.state;\n    return (\n      <div className='container-contact100'>\n        <div className='wrap-contact100'>\n          <form\n            onSubmit={this.onSubmit}\n            className='contact100-form validate-form'\n          >\n            <span className='contact100-form-title'>Try Your Luck</span>\n            {!isMetaMaskPluginAvailable && !startWarning && (\n              <div className='metamask-not-found'>Metamask Not Found</div>\n            )}\n            {!isMetaMaskPluginAvailable && startWarning && (\n              <div className='metamask-not-found warning'>\n                Metamask Not Found\n              </div>\n            )}\n            {errorMessage && (\n              <div className='metamask-not-found error-message'>\n                {errorMessage}\n              </div>\n            )}\n            {this.inputForm()}\n            {this.announcements()}\n          </form>\n          {this.rules()}\n        </div>\n      </div>\n    );\n  }\n\n  rules() {\n    return (\n      \n      <div className='contact100-more flex-col-c-m'>\n<nav class=\"navbar navbar-light bg-light\">\n  <a class=\"navbar-brand\" href=\"#\">\n    <img src=\"/docs/1.png\" class=\"rounded mx-auto d-block\" alt=\"...\"/>\n  </a>\n</nav>\n        <span className='txt1 p-b-20'>MANLY JACKPOT</span>\n        <div className='flex-w size1 p-b-47'>\n        <div id=\"styledimg\"></div>\n          <div className='flex-col size2'>\n            \n          \n\n            <span className='txt2'>\n              This lottery contract has a prize pool and a list of people who\n              have entered the prize pool. People send some amount of\n              money(bnb) in the contract. As soon as people send some amount\n              of money, they are being recorded as a player. BNB, that the\n              players send, directly goes to the contract account. After a\n              certain times, contract manager make the contract to pick a\n              winner. Then the contract pick a winner randomly and transfer all\n              money from the prize pool to the winner. At that point, the\n              lottery contract resets and becomes ready to accept a new list of\n              players.\n            </span>\n\n            <div className='contract-info-container'>\n              <div>Contract Address: {contractInfo.contractAddress}</div>\n              <div>\n                Monitor Contract Transaction in{' '}\n                <a\n                  target='_blank'\n                  rel='noopener noreferrer'\n                  className='remote-link'\n                  href='https://rinkeby.etherscan.io/tx/0x3349da25727612e32d292b2fd1f1d2ac5d07b35b9b0f62f356f60d3aa65c6241'\n                >\n                  EtherScan\n                </a>\n              </div>\n              <div>\n                Source Code:{' '}\n                <a\n                  target='_blank'\n                  rel='noopener noreferrer'\n                  className='remote-link'\n                  href='https://github.com/bmshamsnahid/Decentralized-Lottery-App'\n                >\n                  Github\n                </a>\n              </div>\n              <div>\n                Inspired from{' '}\n                <a\n                  target='_blank'\n                  rel='noopener noreferrer'\n                  className='remote-link'\n                  href='https://www.udemy.com/course/ethereum-and-solidity-the-complete-developers-guide'\n                >\n                  Stephen Grider Course\n                </a>\n              </div>\n              <div>\n                Powered By{' '}\n                <a\n                  target='_blank'\n                  rel='noopener noreferrer'\n                  className='remote-link'\n                  href='https://www.ethereum.org/'\n                >\n                  Ethereum Network\n                </a>\n              </div>\n              <div>\n                Developed By{' '}\n                <a\n                  target='_blank'\n                  rel='noopener noreferrer'\n                  className='remote-link'\n                  href='https://shams-nahid.herokuapp.com/'\n                >\n                  Shams Nahid\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  announcements() {\n    const { manager, players, balanceBNB } = this.state;\n    return (\n      <div className='announcement-container'>\n        <div className='announcement-title'>\n          Announcements\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            Minimum <span className='marked-number'>0.026</span> BNB is\n            required.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            The contract is managed by MANLY TEAM\n            <span className='manager-address'>{manager}</span>.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            Total <span className='marked-number'>{players.length}</span>{' '}\n            players already joined here.\n          </div>\n        </div>\n        <div className='announcement-section'>\n          <span className='announcement-icon'></span>\n          <div className='announcement-status'>\n            You may win <span className='marked-number'>{balanceBNB}</span>{' '}\n            BNB.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  inputForm() {\n    return (\n      <div>\n        <div className='wrap-input100 validate-input'>\n          <input\n            id='email'\n            className='input100'\n            type='text'\n            name='email'\n            placeholder='Example: 0.50'\n            value={this.state.value}\n            onChange={event => this.setState({ value: event.target.value })}\n          />\n          <span className='focus-input100'></span>\n        </div>\n        <div className='container-contact100-form-btn'>\n          <button className='contact100-form-btn'>Join</button>\n        </div>\n        <span className='network-warning'>\n          This app is running on BSC test network and dealing with fake\n          BNB.\n        </span>\n      </div>\n    );\n  }\n\n  render() {\n    const { isTransactionIsRunning, message } = this.state;\n    return (\n      <LoadingOverlay active={isTransactionIsRunning} spinner text={message}>\n        {this.mainWindow()}\n      </LoadingOverlay>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}